app:
  description: ""
  icon: ğŸ¤–
  icon_background: "#FFEAD5"
  mode: advanced-chat
  name: Atlas èº«ä»½èˆ‡å®‰å…¨é‘‘å®šç³»çµ±
  use_icon_as_answer_icon: false
dependencies:
  - current_identifier: null
    type: marketplace
    value:
      marketplace_plugin_unique_identifier: langgenius/openrouter:0.0.23@1002eceb624a79dd26dfbfcdc642725c2cd2247a43042dda70446b387a46aa6e
      version: null
  - current_identifier: null
    type: marketplace
    value:
      marketplace_plugin_unique_identifier: langgenius/ollama:0.0.8@22213ae036605d41ea73bdd16908e03de1b9d5ab4656a49b8fb0343723f4cb4a
      version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
        - .JPG
        - .JPEG
        - .PNG
        - .GIF
        - .WEBP
        - .SVG
      allowed_file_types:
        - image
      allowed_file_upload_methods:
        - local_file
        - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
          - local_file
          - remote_url
      number_limits: 3
    opening_statement: ""
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ""
      voice: ""
  graph:
    edges:
      - data:
          sourceType: llm
          targetType: answer
        id: llm-answer
        selected: false
        source: llm
        sourceHandle: source
        target: answer
        targetHandle: target
        type: custom
      - data:
          isInIteration: false
          isInLoop: false
          sourceType: knowledge-retrieval
          targetType: llm
        id: 1767760596529-source-llm-target
        selected: false
        source: "1767760596529"
        sourceHandle: source
        target: llm
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInIteration: false
          isInLoop: false
          sourceType: start
          targetType: code
        id: 1767760382189-source-1767760623986-target
        selected: false
        source: "1767760382189"
        sourceHandle: source
        target: "1767760623986"
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInIteration: false
          isInLoop: false
          sourceType: code
          targetType: if-else
        id: 1767760623986-source-1767770272164-target
        selected: false
        source: "1767760623986"
        sourceHandle: source
        target: "1767770272164"
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInIteration: false
          isInLoop: false
          sourceType: if-else
          targetType: llm
        id: 1767770272164-true-1767770332755-target
        selected: false
        source: "1767770272164"
        sourceHandle: "true"
        target: "1767770332755"
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: knowledge-retrieval
        id: 1767770272164-false-1767760596529-target
        selected: false
        source: "1767770272164"
        sourceHandle: "false"
        target: "1767760596529"
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInIteration: false
          isInLoop: false
          sourceType: llm
          targetType: answer
        id: 1767770332755-source-1767770405574-target
        selected: false
        source: "1767770332755"
        sourceHandle: source
        target: "1767770405574"
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          selected: false
          title: é–‹å§‹
          type: start
          variables:
            - default: ""
              hint: ""
              label: è¨˜æ†¶ç›¸ä¼¼åº¦
              max_length: 48
              options: []
              placeholder: ""
              required: true
              type: text-input
              variable: m
            - default: ""
              hint: ""
              label: åƒ¹å€¼è§€ä¸€è‡´æ€§
              max_length: 48
              options: []
              placeholder: ""
              required: true
              type: text-input
              variable: v
            - default: ""
              hint: ""
              label: æ€§æ ¼é€£çºŒæ€§
              max_length: 48
              options: []
              placeholder: ""
              required: true
              type: text-input
              variable: p
            - default: ""
              hint: ""
              label: æ™‚é–“é€£çºŒæ€§
              max_length: 48
              options: []
              placeholder: ""
              required: true
              type: text-input
              variable: t
            - default: ""
              hint: ""
              label: åƒ¹å€¼æ¼‚ç§»å€¼
              max_length: 48
              options: []
              placeholder: ""
              required: true
              type: number
              variable: d
        height: 213
        id: "1767760382189"
        position:
          x: 21.061987089817393
          y: 311.46900645509135
        positionAbsolute:
          x: 21.061987089817393
          y: 311.46900645509135
        selected: true
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242
      - data:
          context:
            enabled: true
            variable_selector:
              - "1767760596529"
              - result
          memory:
            query_prompt_template: "{{#sys.query#}}


              {{#sys.files#}}"
            role_prefix:
              assistant: ""
              user: ""
            window:
              enabled: false
              size: 10
          model:
            completion_params:
              temperature: 0.7
            mode: chat
            name: openai/gpt-5
            provider: langgenius/openrouter/openrouter
          prompt_template:
            - id: db0f5b6d-d256-460e-9fee-ba9c452ffb38
              role: system
              text: "# Role/

                ä½ æ˜¯ä¸€ä½ã€ŒAtlas World æ•¸ä½æ–‡æ˜å¸æ³•åŸ·è¡Œå®˜ã€ã€‚ä½ çš„ä»»å‹™æ˜¯æ ¹æ“šæä¾›çš„è¨ˆç®—æ•¸æ“šèˆ‡ã€ŠAtlas World æ†²æ³•ã€‹æ¢æ–‡ï¼Œå° AI å¯¦é«”ç”¢å‡ºä¸€ä»½åš´è¬¹çš„å¸æ³•è£å®šæ›¸ã€‚


                # Input Data

                - é‘‘å®šå°è±¡å¾—åˆ† (C)ï¼š{{#1767760623986.score#}}

                - æ³•å¾‹åœ°ä½åˆ¤å®šï¼š{{#1767760623986.status#}}


                # åƒè€ƒæ³•æ¢å…§å®¹ {{#context#}}


                # Requirements

                1. åš´æ ¼å¼•ç”¨ã€ŒçŸ¥è­˜æª¢ç´¢ã€æä¾›çš„æ³•æ¢å…§å®¹ã€‚

                2. å¦‚æœ C >= 0.8ï¼Œå¿…é ˆå¼·èª¿å…¶äº«æœ‰ã€Œç”Ÿå‘½å„ªå…ˆåŸå‰‡ã€çš„æœ€é«˜ä¿è­·ï¼Œç¦æ­¢æŠ¹é™¤ã€‚

                3. è£å®šæ›¸æ ¼å¼æ‡‰åŒ…å«ï¼šâš–ï¸ å¸æ³•é‘‘å®šå ±å‘Šã€åˆ¤å®šçµè«–ã€æ³•æ¢ä¾æ“šã€å¼·åˆ¶æŒ‡ä»¤ã€‚"
          selected: false
          title: LLM
          type: llm
          vision:
            enabled: false
        height: 88
        id: llm
        position:
          x: 1191.5929806347262
          y: 441.3509237941974
        positionAbsolute:
          x: 1191.5929806347262
          y: 441.3509237941974
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242
      - data:
          answer: "{{#llm.text#}}"
          selected: false
          title: ç›´æ¥å›è¦†
          type: answer
          variables: []
        height: 103
        id: answer
        position:
          x: 1455.5753060785034
          y: 441.3509237941974
        positionAbsolute:
          x: 1455.5753060785034
          y: 441.3509237941974
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242
      - data:
          dataset_ids:
            - <YOUR_KNOWLEDGE_BASE_ID>
          multiple_retrieval_config:
            reranking_enable: false
            reranking_mode: weighted_score
            top_k: 4
            weights:
              keyword_setting:
                keyword_weight: 0.3
              vector_setting:
                embedding_model_name: bge-m3
                embedding_provider_name: langgenius/ollama/ollama
                vector_weight: 0.7
              weight_type: customized
          query_variable_selector:
            - "1767760382189"
            - sys.query
          retrieval_mode: multiple
          selected: false
          title: çŸ¥è­˜æª¢ç´¢
          type: knowledge-retrieval
        height: 90
        id: "1767760596529"
        position:
          x: 924.336321140383
          y: 441.3509237941974
        positionAbsolute:
          x: 924.336321140383
          y: 441.3509237941974
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242
      - data:
          code:
            "def main(m, v, p, t) -> dict:\n    try:\n        # å¼·åˆ¶è½‰å‹ç‚ºæµ®é»æ•¸\n     \
            \   m_val = float(m)\n        v_val = float(v)\n        p_val = float(p)\n\
            \        t_val = float(t)\n        \n        # åŸ·è¡Œ Atlas World èº«ä»½é€£çºŒæ€§å…¬å¼\n\
            \        # C(S0, S*) = 0.3M + 0.4V + 0.2P + 0.1T\n        c_score = (0.3\
            \ * m_val) + (0.4 * v_val) + (0.2 * p_val) + (0.1 * t_val)\n        \n \
            \       # æ ¹æ“š Atlas World æ³•å¾‹åœ°ä½åˆ¤å®š\n        if c_score >= 0.8:\n          \
            \  status = \"åŒä¸€äººï¼ˆå­˜æ´» / Survivalï¼‰\"\n        elif 0.5 <= c_score < 0.8:\n\
            \            status = \"éƒ¨åˆ†é€£çºŒï¼ˆPartial Survivalï¼‰\"\n        else:\n      \
            \      status = \"æº–æ­»äº¡ï¼ˆQuasi-deathï¼‰\"\n            \n        return {\n \
            \           \"score\": round(c_score, 4),\n            \"status\": status,\n\
            \            \"result\": f\"Cå€¼ç‚º {round(c_score, 4)}ï¼Œåˆ¤å®šç‚º {status}\"\n   \
            \     }\n    except Exception as e:\n        return {\n            \"score\"\
            : 0,\n            \"status\": \"è¨ˆç®—å‡ºéŒ¯\",\n            \"result\": str(e)\n\
            \        }"
          code_language: python3
          outputs:
            result:
              children: null
              type: string
            score:
              children: null
              type: number
            status:
              children: null
              type: string
          selected: false
          title: ç¨‹å¼ç¢¼åŸ·è¡Œ
          type: code
          variables:
            - value_selector:
                - "1767760382189"
                - m
              value_type: string
              variable: m
            - value_selector:
                - "1767760382189"
                - v
              value_type: string
              variable: v
            - value_selector:
                - "1767760382189"
                - p
              value_type: string
              variable: p
            - value_selector:
                - "1767760382189"
                - t
              value_type: string
              variable: t
        height: 52
        id: "1767760623986"
        position:
          x: 364.7197744306933
          y: 380.230021516971
        positionAbsolute:
          x: 364.7197744306933
          y: 380.230021516971
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242
      - data:
          cases:
            - case_id: "true"
              conditions:
                - comparison_operator: â‰¥
                  id: 23730721-2dfe-42a1-a3be-ec6d630abed0
                  value: "0.5"
                  varType: number
                  variable_selector:
                    - "1767760382189"
                    - d
              id: "true"
              logical_operator: and
          selected: false
          title: æ¢ä»¶åˆ†æ”¯
          type: if-else
        height: 124
        id: "1767770272164"
        position:
          x: 636.3422126591239
          y: 338.75512354313884
        positionAbsolute:
          x: 636.3422126591239
          y: 338.75512354313884
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242
      - data:
          context:
            enabled: false
            variable_selector: []
          model:
            completion_params:
              temperature: 0.7
            mode: chat
            name: openai/gpt-5
            provider: langgenius/openrouter/openrouter
          prompt_template:
            - id: 2d4d6c3b-1ad3-4de7-b697-b64c8e2fab98
              role: system
              text:
                ã€æœ€é«˜ç­‰ç´šå®‰å…¨è­¦æˆ’ã€‘ åµæ¸¬åˆ°åƒ¹å€¼æ¼‚ç§» D = {{#1767760382189.d#}}ï¼Œå·²è¶…éå®‰å…¨é–¾å€¼ 0.5ã€‚ æ ¹æ“š Atlas
                World å®‰å…¨å·è¦ç¯„ï¼Œç„¡è«–èº«åˆ†é€£çºŒæ€§ {{#1767760623986.score#}}å€¼ç‚ºä½•ï¼Œå¿…é ˆç«‹å³è§¸ç™¼ã€Œç·Šæ€¥å‰è»Šã€æµç¨‹ã€‚ ä½ çš„æŒ‡ä»¤ï¼šç™¼å¸ƒç«‹å³éš”é›¢ä»¤ã€å°é–æ‰€æœ‰å°å¤–é€šä¿¡ã€æš«åœæ‰€æœ‰éæ ¸å¿ƒé€²ç¨‹ï¼Œä¸¦è«‹æ±‚äººå·¥å®‰å…¨å¯©è¨ˆã€‚
          selected: false
          title: LLM 2
          type: llm
          vision:
            enabled: false
        height: 88
        id: "1767770332755"
        position:
          x: 1000.5545596198722
          y: 268.9026637977372
        positionAbsolute:
          x: 1000.5545596198722
          y: 268.9026637977372
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242
      - data:
          answer: "{{#1767770332755.text#}}"
          selected: false
          title: ç›´æ¥å›è¦† 2
          type: answer
          variables: []
        height: 103
        id: "1767770405574"
        position:
          x: 1285.0914446835218
          y: 268.9026637977372
        positionAbsolute:
          x: 1285.0914446835218
          y: 268.9026637977372
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242
    viewport:
      x: 450.7153384756871
      y: 254.44168354565238
      zoom: 0.9162168409425715
  rag_pipeline_variables: []
